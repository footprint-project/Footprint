<div ng-include="'views/partials/nav.html'"></div>

<md-content class="container">
    <div id="dashheader" layout="row" layout-align="center center">

        <h1>{{uc.userObject.organization}} DASHBOARD</h1>


        <!-- <img id="globe" src="images/globe.png"> -->
    </div>
    <div layout="row">
        <div id="dashline" flex="70">
            <h2>TOTAL FOOTPRINT</h2>

            <canvas id="linechart" width="400" height="225"></canvas>
            <!-- <canvas id="line-chart" width="400" height="225"></canvas> -->

        </div>

        <div flex="30">
            <h2>RECENT PROJECTS</h2>
            <md-card id="recent">
                <h3 ng-repeat="userProject in uc.userService.userProjects">
                    {{userProject.name}}
                        <md-button class="md-raised md-primary" ng-click="uc.showProject($event, $index)" layout-align="left">More Info</md-button>
                    </md-button>
                </h3>

            </md-card>

        </div>
    </div>


    <!-- <div layout="row" layout-align="left"> -->
        <!-- <md-input-container>
            <label>Project</label>

            <md-select class="select" md-selected-text="user.selectedProject" ng-model="user.selectedProject">
                <md-option ng-repeat="userProject in uc.userService.userProjects">
                    {{userProject.name.selectedIndex}}
                </md-option>
            </md-select>
        </md-input-container>
        <md-input-container>

            <label>Country of Operation</label>
            <md-select class="select" md-selected-text="user.selectedCountry" ng-model="user.selectedCountry">
                <md-option ng-repeat="country in uc.userService.countries.data">
                    {{country.name}}
                </md-option>
            </md-select>
        </md-input-container>
        <md-input-container>
            <label>Project Type</label>
            <md-select class="select" ng-model="uc.userService">
                <md-option ng-repeat="name in uc.userService.userProjects">
                    {{userProjects.names}}
                </md-option>
            </md-select>
        </md-input-container> -->



    <!-- </div> -->


<h2>VISUALIZE</h2>
    <!-- DONUTS: -->
        <div layout="column" layout-align="start start"
>
            <div flex>
                <span>
                View your organization's carb impact in a doughnut chart. You can choose by project, period, 
                    category, type, or country. </span>
                </div>
            <div flex>
    
        
            
        <md-input-container>
            <label>View</label>
          <md-select ng-model="uc.viewBy" ng-change="uc.changeView()">
            <md-option value="project">Project</md-option>
            <md-option value="period">Period</md-option>
            <md-option value="category">Category</md-option>
            <md-option value="type">Type</md-option>
            <md-option value="country">Country</md-option>
          </md-select>
        </md-input-container>
          
        </div>
          <!-- TO DO: get route for the particulars dependening on selection
          STRETCH: let there be an ALL option
          Which one: <select ng-model="lc.particularDonut">

          </select> -->
          <md-input-container>
            <label>Divide Chart By</label>
            <md-select ng-model="uc.sliceBy">
            <md-option value="{{uc.viewByObject.one}}">{{uc.viewByObject.one}}</md-option>
            <md-option ng-hide="uc.choseProj" value="{{uc.viewByObject.two}}">{{uc.viewByObject.two}}</md-option>
            <md-option ng-hide="uc.choseProj" value="{{uc.viewByObject.three}}">{{uc.viewByObject.three}}</md-option>
            <md-option value="{{uc.viewByObject.four}}">{{uc.viewByObject.four}}</md-option>
          </md-select>
        </md-input-container>
        <div>
          <md-button class="md-raised md-accent" ng-click="uc.submitQuery(uc.viewBy, uc.sliceBy)">View Chart</md-button>
        </div>
    </div>
    
        <div layout="row">
          <canvas id="donutChart" width="400" height="225"></canvas>
        </div>
    </md-content>



    <!-- BARS: -->
        <div layout="row">

          View a: <select ng-model="uc.barBy" ng-change="uc.changeBarView()">
            <option value="project">Project</option>
            <option value="period">Period</option>
            <option value="type">Type</option>
            <option value="country">Country</option>
          </select>

          <select ng-show="uc.activeSelector == 'project'" ng-model="uc.barParticular">
            <option ng-repeat="x in uc.barResults" value="{{x.project}}">{{x.project}}</option>
          </select>
          <select ng-show="uc.activeSelector == 'period'" ng-model="uc.barParticular">
            <option ng-repeat="x in uc.barResults" value="{{x.period}}">{{x.period}}</option>
          </select>
          <select ng-show="uc.activeSelector == 'type'" ng-model="uc.barParticular">
            <option ng-repeat="x in uc.barResults" value="{{x.type}}">{{x.type}}</option>
          </select>
          <select ng-show="uc.activeSelector == 'country'" ng-model="uc.barParticular">
            <option ng-repeat="x in uc.barResults" value="{{x.country}}">{{x.country}}</option>
          </select>

          <button ng-click="uc.submitBarQuery(uc.barBy, uc.barParticular)">Bar me</button>
        </div>



        <div layout="row">
          <canvas id="barChart" width="400" height="225"></canvas>
        </div>


</md-content>
